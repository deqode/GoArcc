# GoArcc - Go monolith with embedded microservices including GRPC,REST, graphQL and The Clean Architecture.

<p align="center"><img src="https://deqode.github.io/GoArcc/img/logo.svg" width="400"></p>

![GitHub](https://img.shields.io/github/license/deqode/GoArcc)
[![CI](https://github.com/deqode/GoArcc/actions/workflows/go.yml/badge.svg)](https://github.com/deqode/GoArcc/actions/workflows/go.yml)
[![PkgGoDev](https://pkg.go.dev/badge/github.com/deqode/GoArcc)](https://pkg.go.dev/github.com/github.com/deqode/GoArcc)
[![Go Report Card](https://goreportcard.com/badge/github.com/deqode/GoArcc)](https://goreportcard.com/report/github.com/deqode/GoArcc)
[![Coverage Status](https://coveralls.io/repos/github/deqode/github.com/deqode/GoArcc/badge.svg?branch=master)](https://coveralls.io/github/deqode/goarcc?branch=boilerplate)
[![Project Layout](https://img.shields.io/badge/Standard%20Go-Project%20Layout-informational)](https://github.com/golang-standards/project-layout)
[![Release](https://img.shields.io/github/v/release/deqode/GoArcc)](https://github.com/deqode/GoArcc/releases/latest)
![GitHub last commit](https://img.shields.io/github/last-commit/deqode/codeanalyser)
![GitHub go.mod Go version](https://img.shields.io/github/go-mod/go-version/deqode/GoArcc)

## Description
When you start writing a Go project, GoArcc helps to set up all the initial code boilerplate for your project. Initial boilerplate code means how you should organize your codebase and how you can write multiple services. We have support for REST, Graphql as well as gRPC.

We have implemented logging, tracing, health check, Jaeger, etc so that any developer will come and write services within a minute.

In short, GoArcc is a boilerplate setup codebase for any monolithic(Architecture) based web/mobile applications which later converted into microservices(Architecture).

[Read more about GoArcc](https://deqode.github.io/GoArcc/)

## Structure of Go packages

- `client/*` - clients for server dialing
  - `grpcClient` - grpcClient dials grpc server
- `cmd/*` - main application(s)
- `config` - application related configs
- `db` -   postgres DB connection and adapters
- `logger` - global zap logger
- `modules/*` - embedded microservices, with structure:
  - `external-svc` - exposed apis logic implementation
  - `internal-svc` - unexposed apis logic implementation
  - `models` - database models, operations using gorm
  - `pb` - autogenerated files from .proto file
- `protos` - External required protos for internal protos
  - `types` - application related common proto types
- `servers` - all running servers
  - `graphql` - ms graphql registration and server invoke
  - `grpc` - ms grpc registration and server invoke
  - `rest` - ms rest registration and server invoke
## Features

- [X] Project structure (mostly) follows
  [Standard Go Project Layout](https://github.com/golang-standards/project-layout).
- [X] Easily testable code (thanks to The Clean Architecture).
- [X] Graceful shutdown support.
- [X] Example gRPC API:
  - [X] External and internal APIs on different host/port.
  - [X] gRPC services with and without token-based authentication.
  - [X] API design (mostly) follows
    [Google API Design Guide](https://cloud.google.com/apis/design) and
    [Google API Improvement Proposals](https://google.aip.dev/).
- [X] Example graphQL API:
- [X] Example REST API:
- [X] Example tests, both unit and integration.
- [X] Production logging using [zap](https://github.com/uber-go/zap).
- [X] Production metrics using Prometheus.
- [X] Docker and docker-compose support.
- [X] Smart test coverage report
- [X] CI/CD setup for GitHub Actions.

## Development

### Requirements

- Go 1.16
- [Docker](https://docs.docker.com/install/) 19.03+
- [Docker Compose](https://docs.docker.com/compose/install/) 1.25+

### Build from source

1. Clone the repo:
```
git clone git@github.com:deqode/GoArcc.git
```
2. After cloning the repo, review `config.yml` and update for your system as needed
3. Build to create GoArcc binary
```
make build
```


## Run

**Jaeger UI:**

http://localhost:16686

**Health Trace:**

http://localhost:8083/health/

**Prometheus UI:**

http://localhost:9090

**Prometheus UI Metrics:**

http://localhost:9090/metrics

**Grpc Server:**

http://localhost:8080

**Graphql Server:**

http://localhost:8081

**Rest Server:**

http://localhost:8082


## License
```
Copyright 2021, DeqodeLabs (https://deqode.com/)

Licensed under the MIT License(the "License");

```
<p align="center"><img src="https://deqode.com/wp-content/uploads/presskit-logo.png" width="400"></p>
